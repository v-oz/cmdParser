# cmdParser

## Описание
Парсер команд является интерфейсом между человеком или машиной, которые отдают команды текстом (или голосом, преобразованным в текст) и средой, в которую интегрирован парсер. Средство доставки входного текста остаётся на усмотрение интегратора и может быть любым.
Так же средой, в которой будет работать парсер может быть любой программный комплекс, имеющий API на языке парсера - смартфон с [Tasker](tasker.dinglisch.net/index.html), сервер, браузерное приложение. Выполняемая в итоге команда - суть, функция, вызывающая команды или функции той среды, куда встроен парсер. Парсер написан на `JavaScript`. При желании его можно портировать на любой другой ЯВУ.

### Входные данные
Во входном тексте помимо прочего текста должны содержаться расположенные в любом порядке ключевые слова:
- для активации парсера
- для указания набора команд
- для указания конкретной команды

Во входном тексте могут быть ключевые слова нескольких наборов и/или команд, в случае если предполагается запуск нескольких команд одним входным текстом. При этом порядок выполнения команд явно не определен - только алгоритмом работы регулярных выражений языка парсера.

#### Ограничения данных
* Ключевые слова должны легко вычленяться простыми регулярными выражениями языка парсера.
* Ключевые слова систем не должны пересекаться на уровне системы. (В случае интеграции нескольких систем в одной среде и предполагаемой активации этих систем одним входным текстом)
* Ключевые слова набора не должны пересекаться на уровне наборов.
* Ключевые слова команд не должны пересекаться на уровне команд.

При несоблюдении ограничений работа парсера может не отвечать ожиданиям.

__NOTE__ Если одиночная команда присутствует на уровне наборов, то её ключевое слово не должно пересекаться со словами уровня наборов. `КО`

### Построение системы
`cmd.core.js` - ядро парсера. По сути - шаблоны объектов `Команда` `Набор` `Система`.
В процессе интеграции необходимо создать наборы команд и/или команды и объединить их в систему.
Для удобства, они сохраняются в отдельном файле, т.к. в одной среде парсер может быть использован для разных задач,
используя при этом одно ядро. См. `financisto.cmd.js`

Таким образом, создаётся три уровня системы:

1. Система
2. Наборы
3. Команды. 

Однако, команда может быть на уровне наборов, т.к. анатомически она является родителем набора и может заменить его на этом уровне.


### Как, это работает? :open_mouth:
Система команд активируется при наличии ключевого слова во входном тексте, полученном от среды.
Далее выбирается набор команд, ключевые слова которого есть во входном тексте. В наборе выбирается команда по ключевому слову и выполняется её действие. 

Если после активации системы во входном тексте не обнаружено ни одного ключевого слова наборов, выполняется действие по умолчанию системы.

Если в наборе не обнаружена команда, то выполняется действие по умолчанию для этого набора.

Обычно это может быть либо уведомление о неуспешном завершении, либо интерактивный диалог для запроса последующих действий.
